import{_ as a,c as i,e,o as n}from"./app-LDBsZIJ8.js";const t={};function l(p,s){return n(),i("div",null,s[0]||(s[0]=[e(`<div class="hint-container tip"><p class="hint-container-title">提示</p><p>以下行为需要确保你所使用的用户拥有 <code>root</code> 权限</p></div><h2 id="获取计算机版本信息" tabindex="-1"><a class="header-anchor" href="#获取计算机版本信息"><span>获取计算机版本信息</span></a></h2><p>首先在目标机器上执行命令查看当前计算机版本信息：</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">hostnamectl</span></span></code></pre></div><p>执行成功后应该会看到类似于以下的输出内容：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span> Static hostname: server1</span></span>
<span class="line"><span>       Icon name: computer-server</span></span>
<span class="line"><span>         Chassis: server</span></span>
<span class="line"><span>      Machine ID: b3xxxxx22961xxxxxxc370fdxxxxxxxx</span></span>
<span class="line"><span>         Boot ID: 37xxxxx6c548xxxxxx40cd45xxxxxxxx</span></span>
<span class="line"><span>Operating System: Ubuntu 22.04 LTS</span></span>
<span class="line"><span>          Kernel: Linux 5.15.0-127-generic</span></span>
<span class="line"><span>    Architecture: x86-64</span></span>
<span class="line"><span> Hardware Vendor: IEIT SYSTEMS</span></span>
<span class="line"><span>  Hardware Model: NF5270M6</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="查找合适的安装包" tabindex="-1"><a class="header-anchor" href="#查找合适的安装包"><span>查找合适的安装包</span></a></h2><p>到 <a href="https://www.elastic.co/downloads/past-releases#elasticsearch" target="_blank" rel="noopener noreferrer">elasticsearch官网</a> 上找到适合自己服务器系统的版本，这里以 <code>Elasticsearch 8.17.0</code> 版本为例。</p><h2 id="下载安装包到机器" tabindex="-1"><a class="header-anchor" href="#下载安装包到机器"><span>下载安装包到机器</span></a></h2><p>在合适的版本上鼠标右键复制下载链接，或直接点击本地下载之后再上传到目标服务器上，或者直接在可以访问 <code>elasticsearch</code> 官网的服务器下执行命令：</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wget</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.17.0-linux-x86_64.tar.gz</span></span></code></pre></div><h2 id="创建安装目录" tabindex="-1"><a class="header-anchor" href="#创建安装目录"><span>创建安装目录</span></a></h2><p>选择或创建要安装 <code>es</code> 服务的目录，比如:</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /haitian/service</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span></span></code></pre></div><h2 id="解包安装包到安装目录" tabindex="-1"><a class="header-anchor" href="#解包安装包到安装目录"><span>解包安装包到安装目录</span></a></h2><p>在安装包所在目录下执行:</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tar</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> xf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> elasticsearch-8.17.0-linux-x86_64.tar.gz</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -C</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /haitian/service/</span></span></code></pre></div><h2 id="创建软链" tabindex="-1"><a class="header-anchor" href="#创建软链"><span>创建软链</span></a></h2><p>进入安装目录，并创建软链:</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /haitian/service/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ln</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> elasticsearch-8.17.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> elasticsearch</span></span></code></pre></div><h2 id="创建es用户" tabindex="-1"><a class="header-anchor" href="#创建es用户"><span>创建es用户</span></a></h2><p>在任意位置执行一下命令创建 <code>es</code> 用户:</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">useradd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> esuser</span></span></code></pre></div><ol><li>命令含义</li></ol><ul><li><code>useradd</code>: 用于在 Linux 系统中创建新用户。</li><li><code>esuser</code>: 是你想要创建的新用户名。</li></ul><ol start="2"><li>命令作用</li></ol><p>执行 useradd esuser 后，系统会创建一个名为 esuser 的用户。默认情况下，该命令会：</p><ul><li>在 /etc/passwd 文件中添加一条记录，表示新增的用户。</li><li>创建一个唯一的用户 ID (UID) 和一个默认的主组 ID (GID)。</li><li>如果默认设置允许，还会为用户创建主目录（具体行为取决于系统配置）。</li></ul><h2 id="允许es用户锁定内存" tabindex="-1"><a class="header-anchor" href="#允许es用户锁定内存"><span>允许es用户锁定内存</span></a></h2><p>编辑 <code>/etc/security/limits.conf</code> 并在底部添加以下内容保存并退出:</p><div class="language-text" data-ext="text" data-title="text"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>esuser hard nofile 65536</span></span>
<span class="line"><span>esuser soft nofile 65536</span></span>
<span class="line"><span>esuser soft memlock unlimited</span></span>
<span class="line"><span>esuser hard memlock unlimited</span></span></code></pre></div><p>添加完成后执行 <code>sysctl -p</code> 更新配置。</p><h2 id="修改es默认配置文件" tabindex="-1"><a class="header-anchor" href="#修改es默认配置文件"><span>修改es默认配置文件</span></a></h2><p>进入 <code>es</code> 配置文件目录，备份默认配置文件</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /haitian/service/elasticsearch/config</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> elasticsearch.yml</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> elasticsearch.yml.bak</span></span></code></pre></div><p>编辑配置文件 <code>vim elasticsearch.yml</code> 将以下内容写入文件:</p><div class="language-yml line-numbers-mode" data-ext="yml" data-title="yml"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cluster.name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> es-cluster</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # es服务名称，各节点需要统一名称</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">node.name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> server1</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 所在节点的别名</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">path.data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /haitian/service/elasticsearch/data</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 数据存放目录</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">path.logs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /haitian/service/elasticsearch/logs</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 日志存放目录</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">bootstrap.memory_lock</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 允许内存锁定</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">network.host</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.0.0.0</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 允许哪些网段访问 0.0.0.0 为任意ip访问，根据需要设置</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">http.port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 9200</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 服务端口号</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">discovery.seed_hosts</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">xx.xx.xx.xx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">xx.xx.xx.xx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">xx.xx.xx.xx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 节点ip地址</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cluster.initial_master_nodes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">xx.xx.xx.xx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">xx.xx.xx.xx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">xx.xx.xx.xx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 允许节点进行主节点选举的ip地址列表，它的作用是帮助集群完成主节点的第一次选举，确保集群能够正常启动并防止发生主节点分裂问题。</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">action.auto_create_index</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> .monitoring*,.watches,.triggered_watches,.watcher-history*,.ml*</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 用于控制是否允许 Elasticsearch 自动创建索引。它的主要作用是决定在索引不存在时，系统是否会自动创建新索引。</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">xpack.security.transport.ssl.enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 禁用 Elasticsearch 节点之间通信（Transport 通信）使用的 SSL 加密。</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">xpack.security.http.ssl.enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 禁用客户端与 Elasticsearch 的 HTTP 通信使用的 SSL 加密。</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">xpack.security.enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 完全禁用 X-Pack 安全功能，如果有专业的维护人员底部的三个参数可以视情况进行调整。</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#xpack.security.enabled: true</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#xpack.security.transport.ssl.enabled: true</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#xpack.security.transport.ssl.verification_mode: certificate</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#xpack.security.transport.ssl.keystore.path: elastic-certificates.p12</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#xpack.security.transport.ssl.truststore.path: elastic-certificates.p12</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="添加hosts映射关系" tabindex="-1"><a class="header-anchor" href="#添加hosts映射关系"><span>添加hosts映射关系</span></a></h2><p>编辑 <code>/etc/hosts</code> 文件，并在底部添加以下内容:</p><div class="language-text" data-ext="text" data-title="text"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>xx.xx.xx.xx server1</span></span>
<span class="line"><span>xx.xx.xx.xx server2</span></span>
<span class="line"><span>xx.xx.xx.xx server3</span></span></code></pre></div><h2 id="添加数据目录" tabindex="-1"><a class="header-anchor" href="#添加数据目录"><span>添加数据目录</span></a></h2><p>在 <code>es</code> 安装根目录下，创建与 <code>elasticsearch.yml</code> 文件中对应的数据目录:</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data</span></span></code></pre></div><h2 id="赋予es用户写入权限" tabindex="-1"><a class="header-anchor" href="#赋予es用户写入权限"><span>赋予es用户写入权限</span></a></h2><p>赋予刚才添加的es用户 <code>esuser</code> 以写入权限，确保数据可以正常写入</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chown</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> esuser:esuser</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -R</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /haitian/service/elasticsearch-8.17.0</span></span></code></pre></div><h2 id="编辑es守护进程配置文件" tabindex="-1"><a class="header-anchor" href="#编辑es守护进程配置文件"><span>编辑es守护进程配置文件</span></a></h2><p>编辑 <code>/lib/systemd/system/elasticsearch.service</code> 并写入以下配置内容:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=Elasticsearch Service</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Environment=JAVA_HOME=/haitian/service/elasticsearch/jdk</span></span>
<span class="line"><span>Type=forking</span></span>
<span class="line"><span>User=esuser</span></span>
<span class="line"><span>LimitNOFILE=100000</span></span>
<span class="line"><span>LimitMEMLOCK=infinity</span></span>
<span class="line"><span>LimitNPROC=65535</span></span>
<span class="line"><span>ExecStart=/haitian/service/elasticsearch/bin/elasticsearch -d -p /haitian/service/elasticsearch/logs/elasticsearch.pid</span></span>
<span class="line"><span>ExecStop=kill \`cat /haitian/service/elasticsearch/logs/elasticsearch.pid\`</span></span>
<span class="line"><span>RestartSec=3</span></span>
<span class="line"><span>StartLimitBurst=5</span></span>
<span class="line"><span>Restart=always</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=multi-user.target</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意配置文件的涉及到路径部分的配置参数，一定要与你所设置的路径位置保持一致</p></div><p>刷新配置</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> daemon-reload</span></span></code></pre></div><h2 id="修改es服务内存占用值" tabindex="-1"><a class="header-anchor" href="#修改es服务内存占用值"><span>修改es服务内存占用值</span></a></h2><p>进入es安装目录，编辑 <code>config/jvm.options</code> 修改以下参数:</p><div class="language-text" data-ext="text" data-title="text"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>-Xms16g  # 根据你的计算机内存大小设定，一般为计算机内存的一半，这里的计算机内存为32G</span></span>
<span class="line"><span>-Xmx16g  # 同上</span></span></code></pre></div><h2 id="启动es服务" tabindex="-1"><a class="header-anchor" href="#启动es服务"><span>启动es服务</span></a></h2><p>执行命令启动 <code>es</code> 服务</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> elasticsearch.service</span></span></code></pre></div><p>将es服务加入系统服务</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> elasticsearch</span></span></code></pre></div><p>查看服务执行状态</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> elasticsearch</span></span></code></pre></div><p>如果顺利的话，你将看到类似以下内容：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>● elasticsearch.service - Elasticsearch Service</span></span>
<span class="line"><span>     Loaded: loaded (/lib/systemd/system/elasticsearch.service; enabled; vendor preset: enabled)</span></span>
<span class="line"><span>     Active: active (running) since Thu 2024-12-26 05:57:36 UTC; 2h 33min ago</span></span>
<span class="line"><span>    Process: 6743 ExecStart=/home/haitian/service/elasticsearch/bin/elasticsearch -d -p /home/haitian/service/elasticsearch/logs/elasticsearch.pid (code=exited, status=0/SUCCESS)</span></span>
<span class="line"><span>   Main PID: 6816 (java)</span></span>
<span class="line"><span>      Tasks: 238 (limit: 37950)</span></span>
<span class="line"><span>     Memory: 17.5G</span></span>
<span class="line"><span>        CPU: 6min 14.055s</span></span>
<span class="line"><span>     CGroup: /system.slice/elasticsearch.service</span></span>
<span class="line"><span>             ├─6816 /home/haitian/service/elasticsearch/jdk/bin/java -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.&gt;</span></span>
<span class="line"><span>             └─6870 /home/haitian/service/elasticsearch/modules/x-pack-ml/platform/linux-x86_64/bin/controller</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Dec 26 05:57:34 server2 elasticsearch[6816]: [2024-12-26T05:57:34,367][INFO ][o.e.x.d.l.DeprecationIndexingComponent] [server2] deprecation component started</span></span>
<span class="line"><span>Dec 26 05:57:34 server2 elasticsearch[6816]: [2024-12-26T05:57:34,428][INFO ][o.e.t.TransportService   ] [server2] publish_address {xx.xx.xx.xx:9300}, bound_addresses {[::]:9300}</span></span>
<span class="line"><span>Dec 26 05:57:35 server2 elasticsearch[6816]: [2024-12-26T05:57:35,078][INFO ][o.e.b.BootstrapChecks    ] [server2] bound or publishing to a non-loopback address, enforcing bootstrap checks</span></span>
<span class="line"><span>Dec 26 05:57:35 server2 elasticsearch[6816]: [2024-12-26T05:57:35,081][WARN ][o.e.c.c.ClusterBootstrapService] [server2] this node is locked into cluster UUID [BX97hvt_TgePRe-k7o2c_A] but [cluster.init&gt;</span></span>
<span class="line"><span>Dec 26 05:57:35 server2 elasticsearch[6816]: [2024-12-26T05:57:35,632][INFO ][o.e.c.s.ClusterApplierService] [server2] master node changed {previous [], current [{server1}{gVMoUjG1RBO_85cb2e2wsw}{7sgO&gt;</span></span>
<span class="line"><span>Dec 26 05:57:35 server2 elasticsearch[6816]: [2024-12-26T05:57:35,648][INFO ][o.e.c.s.ClusterSettings  ] [server2] updating [xpack.monitoring.collection.enabled] from [false] to [true]</span></span>
<span class="line"><span>Dec 26 05:57:35 server2 elasticsearch[6816]: [2024-12-26T05:57:35,989][INFO ][o.e.l.ClusterStateLicenseService] [server2] license [39bb98a8-622d-443b-86e5-765273df2139] mode [basic] - valid</span></span>
<span class="line"><span>Dec 26 05:57:35 server2 elasticsearch[6816]: [2024-12-26T05:57:35,995][INFO ][o.e.h.AbstractHttpServerTransport] [server2] publish_address {xx.xx.xx.xx:9200}, bound_addresses {[::]:9200}</span></span>
<span class="line"><span>Dec 26 05:57:36 server2 elasticsearch[6816]: [2024-12-26T05:57:36,006][INFO ][o.e.n.Node               ] [server2] started {server2}{fGIwpTAZSKSNO6ncsONurQ}{DxsV34E3SzOhwzFNoeRy1w}{server2}{10.10.7.4&gt;</span></span>
<span class="line"><span>Dec 26 05:57:36 server2 systemd[1]: Started Elasticsearch Service.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,64)]))}const h=a(t,[["render",l],["__file","index.html.vue"]]),r=JSON.parse('{"path":"/article/ta5hbixv/","title":"es集群部署流程","lang":"zh-CN","frontmatter":{"title":"es集群部署流程","tags":["es","集群","安装"],"createTime":"2024/12/26 14:36:14","permalink":"/article/ta5hbixv/","description":"提示 以下行为需要确保你所使用的用户拥有 root 权限 获取计算机版本信息 首先在目标机器上执行命令查看当前计算机版本信息： 执行成功后应该会看到类似于以下的输出内容： 查找合适的安装包 到 elasticsearch官网 上找到适合自己服务器系统的版本，这里以 Elasticsearch 8.17.0 版本为例。 下载安装包到机器 在合适的版本上鼠...","head":[["meta",{"property":"og:url","content":"https://yuanshao-blog.netlify.app/article/ta5hbixv/"}],["meta",{"property":"og:site_name","content":"袁少航"}],["meta",{"property":"og:title","content":"es集群部署流程"}],["meta",{"property":"og:description","content":"提示 以下行为需要确保你所使用的用户拥有 root 权限 获取计算机版本信息 首先在目标机器上执行命令查看当前计算机版本信息： 执行成功后应该会看到类似于以下的输出内容： 查找合适的安装包 到 elasticsearch官网 上找到适合自己服务器系统的版本，这里以 Elasticsearch 8.17.0 版本为例。 下载安装包到机器 在合适的版本上鼠..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-16T07:43:39.000Z"}],["meta",{"property":"article:tag","content":"es"}],["meta",{"property":"article:tag","content":"集群"}],["meta",{"property":"article:tag","content":"安装"}],["meta",{"property":"article:modified_time","content":"2025-01-16T07:43:39.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"es集群部署流程\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-01-16T07:43:39.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":5.02,"words":1507},"git":{"updatedTime":1737013419000,"contributors":[{"name":"袁少航","username":"袁少航","email":"yuanshaohang@dataoceanai.com","commits":1,"avatar":"https://avatars.githubusercontent.com/袁少航?v=4","url":"https://github.com/袁少航"}]},"autoDesc":true,"filePathRelative":"云计算与部署/es-cluster-deployment.md","categoryList":[{"id":"0973f7","sort":10003,"name":"云计算与部署"}],"bulletin":true}');export{h as comp,r as data};
